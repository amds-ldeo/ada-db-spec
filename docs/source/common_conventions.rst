Common Conventions
==================

Concept conventions
------------------------
Throughout this guide, we always use **record** to mean a digital resource created by a user in ADA. Equivalent to **resource** in `datacite schema <https://support.datacite.org/docs/datacite-metadata-schema-44>`_ and **data product** in `SAMIS data product Documents <https://osiris-rex.atlassian.net/wiki/spaces/SDPD/overview?homepageId=410484833>`_.

Naming conventions
------------------------
* identifiers (names of databases, tables, columns, etc): lower case with underscores, e.g. ``record_creators``.
* table name: should be named using a plural word, e.g. ``records``.
* id column (primary key): use ``id``.
* id column (foreign key): use the table name (singular) followd by “id” (e.g. record_id).

SERIAL type id column
------------------------
Each table has a ``SERIAL`` type id column as primary key, which stores a sequential integer, of the INT data type,
that is automatically assigned by the database server when a new row is inserted.

.. note::

   Don't need to populate the ``id`` column when create new row in the table. It is automatically generated by database.

Two automatic timestamps
------------------------
There are two timestamp columns ``created_at`` and ``updated_at`` present in all tables.
Both of them are set to ``NOW()`` defaultly in each table. Each table also has a 
trigger ``set_timestamp`` that will execute the `trigger_set_timestamp <https://schema.astromat.org/ada/routines/trigger_set_timestamp___8ec213b3.html>`_ function 
, which will do so whenever a row is updated in the table. Both the ``created_at`` and 
``updated_at`` columns will be saved correctly whenever insert and update rows in the table.

.. note::
   Don't need to populate either the ``created_at`` or ``updated_at`` columns when insert and update rows in the table. They are automatically generated by database.

